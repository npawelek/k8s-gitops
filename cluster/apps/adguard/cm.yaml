---
apiVersion: v1
kind: ConfigMap
metadata:
  name: adguard-home-conf
  namespace: adguard
data:
  AdGuardHome.yaml: |-
    http:
      pprof:
        port: 6060
        enabled: false
      address: 0.0.0.0:3000
      session_ttl: 167h
    users: []
    auth_attempts: 5
    block_auth_min: 15
    http_proxy: ""
    language: en
    theme: auto
    dns:
      bind_hosts:
        - 0.0.0.0
      port: 53
      anonymize_client_ip: false
      ratelimit: 50
      ratelimit_subnet_len_ipv4: 24
      ratelimit_subnet_len_ipv6: 56
      ratelimit_whitelist: []
      refuse_any: true
      upstream_dns:
        - tls://dns.quad9.net
        - tls://dns.mullvad.net
        - tls://p0.freedns.controld.com
      upstream_dns_file: ""
      bootstrap_dns:
        - 9.9.9.9
        - 149.112.112.112
      fallback_dns: []
      all_servers: true
      fastest_addr: true
      fastest_timeout: 1s
      allowed_clients: []
      disallowed_clients: []
      blocked_hosts:
        - version.bind
        - id.server
        - hostname.bind
      trusted_proxies:
        - 127.0.0.0/8
        - ::1/128
      cache_size: 4194304
      cache_ttl_min: 0
      cache_ttl_max: 0
      cache_optimistic: true
      cache_optimistic_answer_ttl: '30s'
      cache_optimistic_max_age: '12h'
      bogus_nxdomain: []
      aaaa_disabled: false
      enable_dnssec: false
      edns_client_subnet:
        custom_ip: ""
        enabled: false
        use_custom: false
      max_goroutines: 300
      handle_ddr: true
      ipset: []
      ipset_file: ""
      bootstrap_prefer_ipv6: false
      upstream_timeout: 3s
      private_networks: []
      use_private_ptr_resolvers: true
      local_ptr_upstreams: []
      use_dns64: false
      dns64_prefixes: []
      serve_http3: false
      use_http3_upstreams: false
      serve_plain_dns: true
    tls:
      enabled: false
      server_name: ""
      force_https: true
      port_https: 443
      port_dns_over_tls: 853
      port_dns_over_quic: 853
      port_dnscrypt: 0
      dnscrypt_config_file: ""
      allow_unencrypted_doh: false
      certificate_chain: ""
      private_key: ""
      certificate_path: ""
      private_key_path: ""
      strict_sni_check: false
    querylog:
      dir_path: ""
      ignored: []
      interval: 336h
      size_memory: 1000
      enabled: true
      file_enabled: true
    statistics:
      dir_path: ""
      ignored: []
      interval: 336h
      enabled: true
    filtering:
      blocking_ipv4: ""
      blocking_ipv6: ""
      blocking_mode: default
      blocked_response_ttl: 300
      parental_block_host: family-block.dns.adguard.com
      safebrowsing_block_host: standard-block.dns.adguard.com
      rewrites_enabled: true
      rewrites:
        - domain: udmp.nathanpawelek.com
          answer: 192.168.0.1
          enabled: true
        - domain: adguard.nathanpawelek.com
          answer: 192.168.0.15
          enabled: true
        - domain: hajimari.nathanpawelek.com
          answer: 192.168.0.15
          enabled: true
        - domain: hass.nathanpawelek.com
          answer: 192.168.0.15
          enabled: true
        - domain: hyp-samsung55.nathanpawelek.com
          answer: 192.168.10.130
          enabled: true
        - domain: in.nathanpawelek.com
          answer: 192.168.0.15
          enabled: true
        - domain: jellyfin.nathanpawelek.com
          answer: 192.168.0.15
          enabled: true
        - domain: immich.nathanpawelek.com
          answer: 192.168.0.15
          enabled: true
        - domain: mqtt.nathanpawelek.com
          answer: 192.168.0.14
          enabled: true
        - domain: ntp.nathanpawelek.com
          answer: 192.168.0.12
          enabled: true
        - domain: postgres-external-rw.nathanpawelek.com
          answer: 192.168.0.11
          enabled: true
        - domain: racknas.nathanpawelek.com
          answer: 192.168.0.151
          enabled: true
        - domain: auth.itscontained.dev
          answer: 192.168.0.20
          enabled: true
      blocked_services:
        schedule:
          time_zone: America/Chicago
        ids:
          - tinder
          - onlyfans
          - ok
          - mail_ru
          - vk
          - weibo
          - viber
          - qq
      protection_enabled: true
      filtering_enabled: true
      filters_update_interval: 12
      parental_enabled: false
      safesearch_enabled: false
      safebrowsing_enabled: false
      safebrowsing_cache_size: 1048576
      safesearch_cache_size: 1048576
      parental_cache_size: 1048576
      cache_time: 30
    filters:
      - enabled: true
        url: https://adguardteam.github.io/AdGuardSDNSFilter/Filters/filter.txt
        name: AdGuard DNS List
        id: 1
      - enabled: true
        url: https://raw.githubusercontent.com/Perflyst/PiHoleBlocklist/master/SmartTV-AGH.txt
        name: Perflyst and Dandelion Sprout's Smart-TV Blocklist
        id: 1656360963
      - enabled: true
        url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_1.txt
        name: AdGuard DNS filter
        id: 1764462984
      - enabled: true
        url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_48.txt
        name: HaGeZi's Pro Blocklist
        id: 1764462985
      - enabled: true
        url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_27.txt
        name: OISD Blocklist Big
        id: 1764462986
      - enabled: true
        url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_12.txt
        name: Dandelion Sprout's Anti-Malware List
        id: 1764462987
      - enabled: true
        url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_44.txt
        name: HaGeZi's Threat Intelligence Feeds
        id: 1764462988
      - enabled: true
        url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_42.txt
        name: ShadowWhisperer's Malware List
        id: 1764462989
      - enabled: true
        url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_67.txt
        name: HaGeZi's Apple Tracker Blocklist
        id: 1764462991
      - enabled: true
        url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_7.txt
        name: Perflyst and Dandelion Sprout's Smart-TV Blocklist
        id: 1764462992
      - enabled: true
        url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_57.txt
        name: ShadowWhisperer's Dating List
        id: 1764462993
      - enabled: true
        url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_55.txt
        name: HaGeZi's Badware Hoster Blocklist
        id: 1764462994
      - enabled: true
        url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_54.txt
        name: HaGeZi's DynDNS Blocklist
        id: 1764462995
      - enabled: true
        url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_69.txt
        name: ShadowWhisperer Tracking List
        id: 1764462997
      - enabled: true
        url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_39.txt
        name: Dandelion Sprout's Anti Push Notifications
        id: 1764462998
      - enabled: true
        url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_6.txt
        name: Dandelion Sprout's Game Console Adblock List
        id: 1764462999
      - enabled: true
        url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_45.txt
        name: HaGeZi's Allowlist Referral
        id: 1764463000
      - enabled: true
        url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_63.txt
        name: HaGeZi's Windows/Office Tracker Blocklist
        id: 1764463001
      - enabled: true
        url: https://adguardteam.github.io/HostlistsRegistry/assets/filter_60.txt
        name: HaGeZi's Xiaomi Tracker Blocklist
        id: 1764463002
    whitelist_filters: []
    user_rules:
      # Regex rules
      - '/.*\.fallback\..*\.facebook\.com$/'
      - '||*^$client=192.168.20.193'
      # Block rules (||)
      - '||ads-serve.brave.com^'
      - '||ads.amazon.dev^$important'
      - '||cloudflare-dns.com^$client=192.168.20.49'
      - '||dns.google^$client=192.168.20.49'
      - '||ads.vungle.com^$important'
      - '||adsensecustomsearchads.com^$important'
      - '||adsmoloco.com^$important'
      - '||adthrive.com^$important'
      - '||advertising.amazon.dev^$important'
      - '||adzooma.com^'
      - '||amazon-adsystem.com^$important'
      - '||analysis.vesync.com^$important'
      - '||analytics-webhook.doximity.com^$important'
      - '||analytics.alpha.3kit.com^$important'
      - '||analytics.dots-services.com^$important'
      - '||analyticowl.com^$important'
      - '||app.upsellit.com^$important'
      - '||attcompute.com^$important'
      - '||b2b.joindeleteme.com^$important'
      - '||bf90969srk.bf.dynatrace.com^$important'
      - '||cdn.clkmc.com^$important'
      - '||collector.tinybeans.com^'
      - '||content-loader.com^'
      - '||conviva.com^$important'
      - '||crashlytics.com^$important'
      - '||cta-service-cms2.hubspot.com^$important'
      - '||ctupdate.skyport.io^'
      - '||fb932ef8f8198290a60f66427df19f8905aa69b6.ack.me.sony.com^$important'
      - '||flexoffers.com^$important'
      - '||g.doubleclick.net^$important'
      - '||graph.facebook.com^$ctag=~device_phone'
      - '||html-load.com^'
      - '||lkt.is^$important'
      - '||lookout.com^$important'
      - '||medallia.com^$important'
      - '||monitor.mozilla.org^$important'
      - '||metrics.icloud.com^'
      - '||min-api.cryptocompare.com^'
      - '||moengage.com^$important'
      - '||piwpak.com^'
      - '||polyfill.io^$important'
      - '||pp-prod-ads.ue2.breadgateway.net^$important'
      - '||prod.upsellit.com^$important'
      - '||pubmatic.com^$important'
      - '||px.nineanalytics.io^$important'
      - '||rechargeapps.com^$important'
      - '||run.app^$important'
      - '||slinganalytics.movetv.com^$important'
      - '||teads.tv^$important'
      - '||test.huedatastore.com^'
      - '||tk-adsystem.a2z.com^$important'
      - '||web.diagnostic.networking.aws.dev^'
      - '||workers.dev^$important'
      - '||www.automizely-analytics.com^$important'
      - '||www.baidu.com^$important'
      - '||www.clkmc.com^$important'
      # Whitelist rules (@@)
      - '# Enable FindMy'
      - '@@/.*-ssl\.ls\.apple\.com$/'
      - '@@/^avs-alexa-.*-na\.amazon\.com$/'
      - '@@||checkip.amazonaws.com^$important'
      - '@@||fls-na.amazon.com^'
      - '@@||kinesis.us-east-1.amazonaws.com^'
      - '@@||kinesis.us-west-2.amazonaws.com^'
      - '@@||local^$important'
      - '@@||mas-ext.amazon.com^$important'
      - '@@||v.w-x.co^'
      # - '||my.nanoleaf.me^$important'
      # - '||controlv2.nanoleaf.me^$important'
      # - '||collector.nanoleaf.me^$important'
      # - '||daemon.nanoleaf.me^$important'
      # - '||apollo.nanoleaf.me^$important'
      # - '||iaso.nanoleaf.me^$important'
      # - '||dvz75zw5cearf.cloudfront.net^$important'
      # - '||example.org^ # block'
      # - '||example.org^$ctag=~device_phone' # block for all, except device_phone tag (https://github.com/AdguardTeam/AdGuardHome/wiki/Hosts-Blocklists#ctag)
      # - '@@||example.org^ # unblock'
    dhcp:
      enabled: false
    clients:
      runtime_sources:
        whois: true
        arp: true
        rdns: true
        dhcp: false
        hosts: true
      persistent:
        - name: IoT
          tags: []
          ids:
            - 192.168.20.0/24
          blocked_services:
            schedule:
              time_zone: America/Chicago
            ids: []
          upstreams: []
          use_global_settings: true
          filtering_enabled: false
          parental_enabled: false
          safesearch_enabled: false
          safebrowsing_enabled: false
          use_global_blocked_services: true
          ignore_querylog: false
          ignore_statistics: false
        - name: Jessie
          tags:
            - device_phone
            - user_regular
          ids:
            - 192.168.30.201
            - 192.168.30.202
            - 192.168.30.203
          blocked_services:
            schedule:
              time_zone: America/Chicago
            ids: []
          upstreams: []
          use_global_settings: true
          filtering_enabled: false
          parental_enabled: false
          safesearch_enabled: false
          safebrowsing_enabled: false
          use_global_blocked_services: true
          ignore_querylog: false
          ignore_statistics: false
        - name: Nathan
          tags:
            - user_admin
          ids:
            - 192.168.30.98
            - 192.168.30.99
            - 192.168.30.100
            - 192.168.30.101
            - 192.168.30.102
            - 192.168.30.103
          blocked_services:
            schedule:
              time_zone: America/Chicago
            ids: []
          upstreams: []
          use_global_settings: true
          filtering_enabled: false
          parental_enabled: false
          safesearch_enabled: false
          safebrowsing_enabled: false
          use_global_blocked_services: true
          ignore_querylog: false
          ignore_statistics: false
        - name: NoT
          tags: []
          ids:
            - 192.168.10.0/24
          blocked_services:
            schedule:
              time_zone: America/Chicago
            ids: []
          upstreams: []
          use_global_settings: true
          filtering_enabled: false
          parental_enabled: false
          safesearch_enabled: false
          safebrowsing_enabled: false
          use_global_blocked_services: true
          ignore_querylog: false
          ignore_statistics: false
        - name: Work
          tags: []
          ids:
            - 192.168.40.0/24
          blocked_services:
            schedule:
              time_zone: America/Chicago
            ids: []
          upstreams: []
          use_global_settings: true
          filtering_enabled: false
          parental_enabled: false
          safesearch_enabled: false
          safebrowsing_enabled: false
          use_global_blocked_services: true
          ignore_querylog: false
          ignore_statistics: false
    log:
      file: ""
      max_backups: 0
      max_size: 100
      max_age: 3
      compress: false
      local_time: true
      verbose: false
    os:
      group: ""
      user: ""
      rlimit_nofile: 0
    schema_version: 32
